app-id: com.felix.crabdrop
runtime: org.gnome.Platform
runtime-version: '46'
sdk: org.gnome.Sdk
command: crabdrop

finish-args:
  - --share=ipc
  - --share=network
  - --socket=fallback-x11
  - --socket=wayland
  - --device=dri
  - --filesystem=xdg-download

modules:
  - name: crabdrop
    buildsystem: simple
    build-commands:
      - ar x crabdrop_0.1.0_amd64.deb
      - tar xf data.tar.gz
      - install -Dm755 usr/bin/crabdrop /app/bin/crabdrop
      - install -Dm644 usr/share/applications/*.desktop /app/share/applications/com.felix.crabdrop.desktop
      - install -Dm644 usr/share/icons/hicolor/32x32/apps/crabdrop.png /app/share/icons/hicolor/32x32/apps/com.felix.crabdrop.png
      - install -Dm644 usr/share/icons/hicolor/128x128/apps/crabdrop.png /app/share/icons/hicolor/128x128/apps/com.felix.crabdrop.png
      - install -Dm644 usr/share/icons/hicolor/256x256@2/apps/crabdrop.png /app/share/icons/hicolor/256x256@2/apps/com.felix.crabdrop.png
      - install -Dm644 com.felix.crabdrop.metainfo.xml /app/share/metainfo/com.felix.crabdrop.metainfo.xml
    sources:
      - type: file
        url: https://github.com/alsofelix/crabdrop/releases/download/v0.1.0/crabdrop_0.1.0_amd64.deb
        sha256: 75cf2289c0f7684d8662a262948934d83815139ade842c1ebb0acc76b7d86248
      - type: file
        path: com.felix.crabdrop.metainfo.xml
